
@model HeaderLinksModel
@using Nop.Core.Domain.Customers
@inject Nop.Core.IWebHelper webHelper
@inject Nop.Core.Domain.Catalog.CatalogSettings _catalogSettings;
 
@if (Model.AllowPrivateMessages && !string.IsNullOrEmpty(Model.AlertMessage))
{
    //new private message notification
    <script asp-location="Footer">
        $(function() {
            displayPopupNotification('@Html.Raw(JavaScriptEncoder.Default.Encode(Model.AlertMessage))', 'success', false);
        });
    </script>
}
@if (Model.ShoppingCartEnabled)
{
    <script asp-location="Footer">
        $(function() {
            $('.header-lower').on({
                focus: function(){
                    $('#flyout-cart').addClass('active');
                },
                focusout: function() {
                    setTimeout(function() {
                        if (!$('#topcartlink, #flyout-cart').find(':focus').length) {
                            $('#flyout-cart').removeClass('active');
                        }
                    }, 0)
                },
                mouseenter: function() {
                    $('#flyout-cart').addClass('active');
                },
                mouseleave: function() {
                    $('#flyout-cart').removeClass('active');
                }
            }, '#topcartlink, #flyout-cart');

            var localized_data = {
                AjaxCartFailure: "@T("AjaxCart.Failure")"
            };

            AjaxCart.init(@Model.UsePopupNotifications.ToString().ToLowerInvariant(), '.header-links .cart-qty', '.header-links .wishlist-qty', '#flyout-cart', localized_data);
        });
    </script>
}
@await Component.InvokeAsync(typeof(WidgetViewComponent), new { widgetZone = PublicWidgetZones.HeaderLinksBefore, additionalData = Model })
<div class="mtheader__mobile-cart d-lg-none mr-30">
    <div class="mtheader__midel-account-wrap p-relative d-flex align-items-center justify-content-between">
        <div class="mtheader__mobile-search">
            <button type="button" class="mobile-search-toggle" aria-expanded="false" aria-controls="mobileSearchModal" aria-label="Open search">
                <i class="fa-solid fa-magnifying-glass"></i>
            </button>
        </div>
        <div class="mtheader__midel-login">
            <a href="@Url.RouteUrl(NopRouteNames.General.HOMEPAGE)" class="mtheader__midel-login-inner" aria-label="Tài khoản">
                <i class="fa-solid fa-user-plus"></i>
            </a>
        </div>

        <div class="mtheader__midel-login">
            <div class="mtcartmini-open-btn header-links" aria-label="Mở giỏ hàng">
                <div class="mtheader__midel-card-value">
                    <i class="fa-solid fa-basket-shopping"></i>
                    <p class="cart-qty">@Model.ShoppingCartItems</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="mtheader__midel-account-wrap p-relative d-none d-lg-flex align-items-center justify-content-between">
    <div class="mtheader__mobile-search d-lg-none">
        <button type="button" class="mobile-search-toggle" aria-expanded="false" aria-controls="mobileSearchModal" aria-label="Open search">
            <i class="fa-solid fa-magnifying-glass"></i>
        </button>
    </div>
    <div class="mtheader__midel-wishlist">
        <a href="wishlist.html"><i class="fa-regular fa-heart"></i></a>
    </div>
    <div class="mtheader__midel-login mtheader__mobile-cart mtheader__account-dropdown">
        <button class="mtheader__account-trigger" type="button" aria-haspopup="true" aria-expanded="false">
            <i class="fa-solid fa-user-plus"></i>
            <span>@T("Account.MyAccount")</span>
            <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="mtheader__account-menu" role="menu">
            @if (Model.IsAuthenticated)
            {
                <a href="@Url.RouteUrl(NopRouteNames.General.CUSTOMER_INFO)" class="mtheader__account-item" role="menuitem">
                    <i class="fa-solid fa-user"></i>
                    <span>@T("Account.MyAccount")</span>
                </a>
                <a href="@Url.RouteUrl(NopRouteNames.Standard.LOGOUT)" class="mtheader__account-item" role="menuitem">
                    <i class="fa-solid fa-portal-exit"></i>
                    <span>@T("Account.Logout")</span>
                </a>
            }
            else
            {
                <a href="@Url.RouteUrl(NopRouteNames.General.LOGIN)" class="mtheader__account-item" role="menuitem">
                    <i class="fa-solid fa-user-plus"></i>
                    <span>@T("Account.Login")</span>
                </a>
                <a href="@Url.RouteUrl(NopRouteNames.Standard.REGISTER)" class="mtheader__account-item" role="menuitem">
                    <i class="fa-solid fa-user-pen"></i>
                    <span>@T("Account.Register")</span>
                </a>
            }
        </div>
    </div>
    <div class="mtheader__midel-login mtheader__mobile-cart header-links">
        <div class="mtcartmini-open-btn">
            <div class="mtheader__midel-card-value">
                <i class="fa-solid fa-basket-shopping"></i>
                <p class="cart-qty">@Model.ShoppingCartItems</p>
                @* <h6>$570.00</h6> *@
            </div>
        </div>
    </div>
</div>
<div class="mt-header-toogle  d-xl-none text-end">
    <button class="mt-offcanvas-toogle mt-offcanvas-toogle-2">
        <i class="fa-regular fa-bars-staggered"></i>
    </button>
</div>
@await Component.InvokeAsync(typeof(WidgetViewComponent), new { widgetZone = PublicWidgetZones.HeaderLinksAfter, additionalData = Model })
